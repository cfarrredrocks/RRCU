-- RRCU_DW_DEV.DM.TS_PRODUCT_FACT definition

create or replace TABLE RRCU_DW_DEV.DM.TS_PRODUCT_FACT_CF cluster by (ACCOUNT_TRIM_NUMBER, CURR_BAL_AMT, ORIG_BAL_AMT, CERT_BUMP_CNT, LAST_PAYMENT_AMT, 
PSN_SERIAL, ACCT_SERIAL, PRODUCT_KEY, PG_GRP_TYPE, PG_SERIAL)(
	ACCOUNT_TRIM_NUMBER VARCHAR(10),
	SERIAL NUMBER(19,0),
	PRODUCT_DSC VARCHAR(40),
	TYPE_CD VARCHAR(40),
	CURR_BAL_AMT NUMBER(15,2),
	--CHARGE_OFF_AMT NUMBER(15,2),
	ORIG_BAL_AMT NUMBER(15,2),
	CERT_BUMP_CNT NUMBER(38,0),
	LAST_PAYMENT_AMT NUMBER(15,2),
	PSN_SERIAL NUMBER(19,0),
	ACCT_SERIAL NUMBER(19,0),
	PRODUCT_KEY VARCHAR(30),
	PG_GRP_TYPE VARCHAR(10),
	PG_SERIAL NUMBER(19,0),
	primary key (SERIAL, PRODUCT_DSC)
);

-- RRCU_DW_DEV.DM.T_PRODUCT_GROUP_DIM definition

create or replace TABLE RRCU_DW_DEV.DM.T_PRODUCT_GROUP_DIM_CF cluster by (GRP, SERIAL, NM, TYPE_DSC, BEGIN_DT, CLOSED_DT)(
	--PG_REC_KEY NUMBER(38,0) NOT NULL autoincrement start 1 increment 1 order,
	--PG_REC_DURABLE_KEY NUMBER(38,0),
	GRP VARCHAR(2),
	SERIAL NUMBER(19,0),
	BEGIN_DT DATE NOT NULL,
	END_DT DATE,
	CLOSED_DT DATE,
	LAST_FM_DT DATE,
	--CURR_IND NUMBER(1,0),
	NM VARCHAR(200),
	TYPE_CD VARCHAR(40),
	CAT_NM VARCHAR(10),
	TYPE_DSC VARCHAR(40),
	STATUS_CD VARCHAR(10),
	DORMANCY_DAYS_NUM NUMBER(5,0),
	MIN_DEPOSIT_AMT NUMBER(16,2),
	--DM_LOAD_DT TIMESTAMP_NTZ(9),
	--DM_UPDATED_DT TIMESTAMP_NTZ(9),
	primary key (GRP,SERIAL)
);


create or replace TABLE RRCU_DW_DEV.DM.T_PERSON_DIM_CF cluster by (SERIAL, FULL_NAME, FIRST_NAME, MIDDLE_NAME, LAST_NAME, GENDER, MKT_OPTION)
(
	--PSN_REC_KEY NUMBER(38,0) NOT NULL autoincrement start 1 increment 1 order,
	--PSN_REC_DURABLE_KEY NUMBER(38,0),
	SERIAL NUMBER(19,0),
	BEGIN_DT DATE NOT NULL,
	END_DT DATE,
	--CURR_IND NUMBER(1,0),
	ROW_CHANGE_TS TIMESTAMP_NTZ(9),
	LAST_FM_DT DATE,
	CATEGORY VARCHAR(1),
	FULL_NAME VARCHAR(120),
	LEX_FULL_NAME VARCHAR(120),
	SUFFIX VARCHAR(10),
	--PSN_LEX_ORDER_NM VARCHAR(150),
	TITLE VARCHAR(10),
	FIRST_NAME VARCHAR(20),
	MIDDLE_NAME VARCHAR(20),
	LAST_NAME VARCHAR(80),
	NICKNAME VARCHAR(20),
	BIRTH_DT DATE,
	DEATH_DT DATE,
	DECEASED_IND NUMBER(1,0),
	GENDER VARCHAR(1),
	MKT_OPTION VARCHAR(2),
	AGE VARCHAR(3),
	AGE_RANGE VARCHAR(10),
	NOTE VARCHAR(500),
	--DM_LOAD_DT TIMESTAMP_NTZ(9),
	--DM_UPDATED_DT TIMESTAMP_NTZ(9),
	primary key (SERIAL)
);


-- RRCU_DW_DEV.DM.T_ACCOUNT_DIM definition

create or replace TABLE RRCU_DW_DEV.DM.T_ACCOUNT_DIM_CF cluster by (ACCOUNT_TRIM_NUMBER, ACCOUNT_NUMBER, OPEN_DT, CLOSE_DT, ELIG_CODE, DELINQUENCY_RESTRICTION)
(
	--ACCT_REC_KEY NUMBER(38,0) NOT NULL autoincrement start 1 increment 1 order,
	--ACCT_REC_DURABLE_KEY NUMBER(38,0),
	SERIAL NUMBER(19,0),
	BEGIN_DT DATE,
	END_DT DATE,
	ACCOUNT_NUMBER VARCHAR(10),
	ACCOUNT_TRIM_NUMBER VARCHAR(10),
	OPEN_DT DATE,
	CLOSE_DT DATE,
	LAST_FM_DT DATE,
	CLOSE_REASON VARCHAR(120),
	CLOSE_REASON_DESC VARCHAR(120),
	CLOSE_STATUS VARCHAR(1),
	CLOSE_REASON_LAST_FM_DT DATE,
	ELIG_CODE VARCHAR(40),
	ELIG_DESC VARCHAR(40),
	ELIG_STATUS VARCHAR(1),
	ELIG_LAST_FM_DT DATE,
	OPENED_BY VARCHAR(40),
	--DM_LOAD_DT TIMESTAMP_NTZ(9),
	--DM_UPDATED_DT TIMESTAMP_NTZ(9),
	DELINQUENCY_RESTRICTION VARCHAR(1),
	NOTE_DESC VARCHAR(2000),
	NOTE_EXPIRATION_DT DATE,
	primary key (SERIAL)
);


-- RRCU_DW_DEV.DM.T_PERSON_CONTACT_DIM definition

create or replace TABLE RRCU_DW_DEV.DM.T_PERSON_CONTACT_DIM_CF cluster by (SERIAL, RES_FULL_ADDR_NM, RES_ADDR1_NM, RES_ADDR2_NM, RES_CITY_NM, RES_STATE_NM, RES_POSTAL_CD, 
MAIL_FULL_ADDR_NM, MAIL_ADDR1_NM, MAIL_ADDR2_NM, MAIL_CITY_NM, MAIL_STATE_NM, MAIL_POSTAL_CD, RES_PHONE_NUM, CELL_PHONE_NUM)
(
	SERIAL NUMBER(38,0),
	BEGIN_DT DATE,
	END_DT DATE,
	BUS_FULL_ADDR_NM VARCHAR(150),
	RES_FULL_ADDR_NM VARCHAR(150),
	MAIL_FULL_ADDR_NM VARCHAR(150),
	BUS_ADDR1_NM VARCHAR(150),
	BUS_ADDR2_NM VARCHAR(150),
	BUS_CITY_NM VARCHAR(50),
	BUS_STATE_NM VARCHAR(50),
	BUS_POSTAL_CD VARCHAR(20),
	BUS_COUNTRY_NM VARCHAR(50),
	BUS_PHONE_NUM VARCHAR(50),
	RES_ADDR1_NM VARCHAR(150),
	RES_ADDR2_NM VARCHAR(150),
	RES_CITY_NM VARCHAR(50),
	RES_STATE_NM VARCHAR(50),
	RES_POSTAL_CD VARCHAR(20),
	RES_COUNTRY_NM VARCHAR(50),
	RES_PHONE_NUM VARCHAR(50),
	CELL_PHONE_NUM VARCHAR(50),
	MAIL_ADDR1_NM VARCHAR(150),
	MAIL_ADDR2_NM VARCHAR(150),
	MAIL_CITY_NM VARCHAR(50),
	MAIL_STATE_NM VARCHAR(50),
	MAIL_POSTAL_CD VARCHAR(20),
	MAIL_COUNTRY_NM VARCHAR(50),
	PERS_EMAIL_NM VARCHAR(50),
	BUS_EMAIL_NM VARCHAR(150),
	DL_ID_NUM VARCHAR(50),
	DL_ID_ISSUER_NM VARCHAR(50),
	DL_ID_EXP_DT DATE,
	SI_ID_NUM VARCHAR(50),
	SI_ID_ISSUER_NM VARCHAR(50),
	SI_ID_EXP_DT DATE,
	PN_ID_NUM VARCHAR(50),
	PN_ID_ISSUER_NM VARCHAR(50),
	PN_ID_EXP_DT DATE,
	CU_ID_NUM VARCHAR(50),
	CU_ID_ISSUER_NM VARCHAR(50),
	CU_ID_EXP_DT DATE,
	primary key (SERIAL)
);

-- RRCU_DW_DEV.DM.T_PRODUCT_DIM definition

create or replace TABLE RRCU_DW_DEV.DM.T_PRODUCT_DIM_CF cluster by (PRODUCT_KEY, SERIAL_NUM, OPEN_DT, CLOSE_DT, MATURITY_DT, LAST_MONETARY_DT, LAST_ACTIVITY_DT, DTI_PCT, 
LOAN_TO_VALUE_PCT, ORIG_SHARE_DT, ORIG_FUNDING_DT, INTEREST_RATE_PCT, COLLECTION_NOTICE_DT)(
--	PRD_REC_KEY NUMBER(38,0) NOT NULL autoincrement start 1 increment 1 order,
--	PRD_REC_DURABLE_KEY NUMBER(38,0),
	PRODUCT_KEY VARCHAR(30),
	SERIAL_NUM NUMBER(19,0),
	ID VARCHAR(4),
	TYPE_CD VARCHAR(40),
	BEGIN_DT DATE NOT NULL,
	END_DT DATE,
	LAST_FM_DT DATE,
	--PRD_CURR_IND NUMBER(1,0),
	CAT_CD VARCHAR(10),
	DSC VARCHAR(40),
	ORIG_BAL_AMT NUMBER(15,2),
	OPEN_DT DATE,
	CLOSE_DT DATE,
	CREDIT_SCORE_NUM NUMBER(10,0),
	CREDIT_SCORE_TIER_NM VARCHAR(40),
	MATURITY_DT DATE,
	LAST_MONETARY_DT DATE,
	LAST_ACTIVITY_DT DATE,
	CHARGE_OFF_DT DATE,
	COLLECTION_NOTICE_DT DATE,
	BANKRUPTCY_IND VARCHAR(2),
	CERT_LAST_BUMP_DT DATE,
	LAST_PAYMENT_DT DATE,
	PAYMENT_METHOD_NM VARCHAR(1),
	PAYMENT_DUE_DT DATE,
	COLLECT_STATUS_CD VARCHAR(1),
	COLLECT_NOTICE_CNT NUMBER(38,0),
	CREDIT_LIMIT_AMT NUMBER(16,2),
	LOAN_TO_VALUE_PCT NUMBER(8,5),
	INTEREST_RATE_PCT NUMBER(8,5),
	ORIG_FUNDING_DT DATE,
	ORIG_SHARE_DT DATE,
	DTI_PCT NUMBER(11,2),
	BRANCH_DSC VARCHAR(40),
	BRANCH_STATUS_CD VARCHAR(1),
	BRANCH_CD VARCHAR(40),
	INTEREST_UNPAID_AMT NUMBER(16,2),
	PAYMENT_PARTIAL_AMT NUMBER(16,2),
	PAYMENT_FREQ_DAY_1_NUM NUMBER(38,0),
	LATE_FEE_CALC_DT DATE,
	PROMO_CD VARCHAR(50),
	PAYMENT_AMT NUMBER(16,2),
	PAYMENT_COUNT_SCHED_CNT NUMBER(38,0),
	PAYMENT_COUNT_MADE_CNT NUMBER(38,0),
	PAYMENT_SKIP_CNT NUMBER(38,0),
	CC_BAL_XFR_INTEREST_RATE_PCT NUMBER(8,5),
	INTEREST_APR_PCT NUMBER(8,5),
	INTEREST_RATE_MARGIN_PCT NUMBER(8,5),
	INTEREST_RATE_MIN_PCT NUMBER(8,5),
	INTEREST_RATE_MAX_PCT NUMBER(8,5),
	BALLOON_DT DATE,
	BALLOON_AMT NUMBER(16,2),
	primary key (PRODUCT_KEY)
);